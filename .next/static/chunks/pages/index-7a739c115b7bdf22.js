(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,a,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(9574)}])},9574:function(e,a,i){"use strict";i.r(a),i.d(a,{default:function(){return Home}});var s=i(5893);function Header(){return(0,s.jsxs)("header",{className:"site-header",children:[(0,s.jsx)("div",{className:"logo",children:"NETFLIX"}),(0,s.jsxs)("nav",{className:"nav",children:[(0,s.jsx)("a",{children:"Inicio"}),(0,s.jsx)("a",{children:"Series"}),(0,s.jsx)("a",{children:"Pel\xedculas"}),(0,s.jsx)("a",{children:"Novedades populares"}),(0,s.jsx)("a",{children:"Mi lista"}),(0,s.jsx)("a",{children:"Explorar por idiomas"})]}),(0,s.jsxs)("div",{className:"nav",children:[(0,s.jsx)("a",{children:"\uD83D\uDD0D"}),(0,s.jsx)("a",{children:"\uD83D\uDD14"}),(0,s.jsx)("a",{children:"\uD83D\uDC64"})]})]})}var t=i(7294);function FriendsPanel(e){let{friends:a=[],loading:i}=e,[r,n]=(0,t.useState)([]),[o,l]=(0,t.useState)([{id:"r1",name:"Martina"},{id:"r2",name:"Lucas"}]),[d,c]=(0,t.useState)(""),[m,h]=(0,t.useState)([]),g=[...a,...r];return(0,s.jsxs)("div",{className:"friends-panel",children:[(0,s.jsxs)("div",{className:"add-friend-section",children:[(0,s.jsx)("h4",{children:"A\xf1adir Amigo"}),(0,s.jsxs)("form",{className:"add-friend-form",onSubmit:function(e){if(e.preventDefault(),!d.trim())return;let a={id:"sent-"+Date.now(),name:d.trim()};h(e=>[...e,a]),c(""),setTimeout(()=>{h(e=>e.filter(e=>e.id!==a.id)),n(e=>[...e,{id:"f-"+a.id,name:a.name,avatar:"",watchedMovies:[{id:"m-"+Date.now(),title:"Nueva pel\xedcula",rating:Math.floor(2*Math.random())+4,isWatching:Math.random()>.7,poster:"https://via.placeholder.com/150x220?text=Nueva"}]}])},3e3)},children:[(0,s.jsx)("input",{type:"text",className:"friend-input",placeholder:"Buscar usuario...",value:d,onChange:e=>c(e.target.value)}),(0,s.jsx)("button",{type:"submit",className:"btn",children:"Enviar"})]}),m.length>0&&(0,s.jsx)("div",{style:{marginTop:"12px"},children:m.map(e=>(0,s.jsxs)("p",{className:"muted",style:{fontSize:"12px"},children:["Solicitud enviada a ",e.name,"..."]},e.id))})]}),(0,s.jsxs)("h3",{children:["Mis Amigos (",g.length,")"]}),i?(0,s.jsx)("div",{className:"loading",children:(0,s.jsx)("p",{className:"muted",children:"Cargando amigos..."})}):(0,s.jsx)("ul",{className:"friend-list",children:g.map(e=>(0,s.jsxs)("li",{className:"friend-item",children:[(0,s.jsx)("div",{className:"avatar",children:e.name.charAt(0)}),(0,s.jsx)("div",{className:"name",children:e.name})]},e.id))}),(0,s.jsx)("h4",{children:"Solicitudes Pendientes"}),o.length?(0,s.jsx)("ul",{className:"requests",children:o.map(e=>(0,s.jsxs)("li",{className:"request-item",children:[(0,s.jsx)("div",{children:e.name}),(0,s.jsx)("button",{className:"btn",onClick:()=>(function(e){let a=o.find(a=>a.id===e);a&&(n(e=>[...e,{id:"f-"+a.id,name:a.name,avatar:"",watchedMovies:[]}]),l(a=>a.filter(a=>a.id!==e)))})(e.id),children:"Aceptar"})]},e.id))}):(0,s.jsx)("p",{className:"muted",children:"Sin solicitudes pendientes"})]})}function MovieCard(e){let{movie:a,showFriend:i}=e;return(0,s.jsxs)("div",{className:"movie-card",title:a.overview,children:[(0,s.jsx)("img",{src:a.poster,alt:a.title,className:"poster",onError:e=>{e.target.src="https://via.placeholder.com/500x750?text=Sin+Poster"}}),(0,s.jsxs)("div",{className:"meta",children:[(0,s.jsx)("div",{className:"title",children:a.title}),(0,s.jsxs)("div",{className:"rating",children:["⭐".repeat(a.rating)," (",a.rating,"/5)"]}),a.releaseDate&&(0,s.jsx)("div",{className:"release-date",children:new Date(a.releaseDate).getFullYear()}),i&&(0,s.jsxs)("div",{className:"friend",children:[a.isWatching?"\uD83C\uDFAC Viendo ahora":"\uD83D\uDC4D Recomendado"," por ",a.friendName]})]})]})}var r=i(7066);let n="https://image.tmdb.org/t/p/w500",o="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4MWRjNzliNTc3OTQ1YmRiNzZkNzU1M2E4NzBjMjJiMCIsIm5iZiI6MTcyOTc2MTIxMS43NTYsInN1YiI6IjY3MWE2ZjBiNmFkOGY2MTVlYjA2YmVjYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.IZKcMwNCUQoR6HD_HpStT7lrcN2aVJywZ7gBBCtdweU";console.log("TMDb API Key:",o?"Present":"Missing");let l=r.Z.create({baseURL:"https://api.themoviedb.org/3",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"},timeout:1e4}),d={async getPopularMovies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{var a,i,s;console.log("Fetching popular movies from TMDb (page ".concat(e,")..."));let t=await l.get("/movie/popular?page=".concat(e,"&language=es-ES"));if(console.log("TMDb response:",t.status,(null===(i=t.data)||void 0===i?void 0:null===(a=i.results)||void 0===a?void 0:a.length)||0,"movies"),!(null===(s=t.data)||void 0===s?void 0:s.results))throw Error("No results from TMDb API");return t.data.results.map(e=>({id:e.id,title:e.title,poster:e.poster_path?"".concat(n).concat(e.poster_path):"https://via.placeholder.com/500x750?text=Sin+Poster",rating:Math.round(e.vote_average/2),overview:e.overview,releaseDate:e.release_date,isWatching:Math.random()>.7}))}catch(e){throw console.error("Error fetching popular movies:",e.message),e.response&&(console.error("Response status:",e.response.status),console.error("Response data:",e.response.data)),e}},async getTrendingMovies(){try{let e=await l.get("/trending/movie/week?language=es-ES");return e.data.results.slice(0,10).map(e=>({id:e.id,title:e.title,poster:e.poster_path?"".concat(n).concat(e.poster_path):"https://via.placeholder.com/500x750?text=Sin+Poster",rating:Math.round(e.vote_average/2),overview:e.overview,releaseDate:e.release_date,isWatching:Math.random()>.8}))}catch(e){return console.error("Error fetching trending movies:",e),[]}},async getTopRatedMovies(){try{let e=await l.get("/movie/top_rated?page=1&language=es-ES");return e.data.results.slice(0,8).map(e=>({id:e.id,title:e.title,poster:e.poster_path?"".concat(n).concat(e.poster_path):"https://via.placeholder.com/500x750?text=Sin+Poster",rating:Math.round(e.vote_average/2),overview:e.overview,releaseDate:e.release_date,isWatching:!1}))}catch(e){return console.error("Error fetching top rated movies:",e),[]}},async getMovieDetails(e){try{console.log("Fetching movie details for ID: ".concat(e));let a=await l.get("/movie/".concat(e,"?language=es-ES")),i=a.data;if(!i||!i.id)throw Error("Invalid movie data for ID ".concat(e));return console.log("Successfully loaded movie: ".concat(i.title)),{id:i.id,title:i.title,poster:i.poster_path?"".concat(n).concat(i.poster_path):"https://via.placeholder.com/500x750?text=Sin+Poster",rating:Math.round(i.vote_average/2),overview:i.overview,releaseDate:i.release_date,runtime:i.runtime,genres:i.genres,isWatching:Math.random()>.8}}catch(a){throw console.error("Error fetching movie details for ID ".concat(e,":"),a.message),a.response&&(console.error("Response status:",a.response.status),console.error("Response data:",a.response.data)),a}}},c=[{id:"f1",name:"Sof\xeda",avatar:"",movieIds:[550,680,13,27205,324857],currentlyWatching:550},{id:"f2",name:"Diego",avatar:"",movieIds:[155,497,120,578,424],currentlyWatching:null},{id:"f3",name:"Valentina",avatar:"",movieIds:[19404,10681,597,11216,674],currentlyWatching:19404}],m=[{id:550,title:"El Club de la Pelea",poster:"https://image.tmdb.org/t/p/w500/pB8BM7pdSp6B6Ih7QZ4DrQ3PmJK.jpg",rating:5,overview:"Un empleado de oficina insomne y un fabricante de jab\xf3n forman un club de lucha clandestino.",releaseDate:"1999-10-15",isWatching:!0},{id:13,title:"Forrest Gump",poster:"https://image.tmdb.org/t/p/w500/arw2vcBveWOVZr6pxd9XTd1TdQa.jpg",rating:5,overview:"Las presidencias de Kennedy y Johnson a trav\xe9s de los ojos de un hombre de Alabama.",releaseDate:"1994-07-06",isWatching:!1},{id:680,title:"Pulp Fiction",poster:"https://image.tmdb.org/t/p/w500/d5iIlFn5s0ImszYzBPb8JPIfbXD.jpg",rating:5,overview:"Las vidas de dos sicarios de la mafia se entrelazan con las de otros criminales.",releaseDate:"1994-09-10",isWatching:!1},{id:155,title:"El Caballero Oscuro",poster:"https://image.tmdb.org/t/p/w500/qJ2tW6WMUDux911r6m7haRef0WH.jpg",rating:5,overview:"Batman debe aceptar una de las pruebas psicol\xf3gicas y f\xedsicas m\xe1s grandes.",releaseDate:"2008-07-16",isWatching:!1},{id:27205,title:"Inception",poster:"https://image.tmdb.org/t/p/w500/9gk7adHYeDvHkCSEqAvQNLV5Uge.jpg",rating:5,overview:"Un ladr\xf3n que roba secretos corporativos a trav\xe9s del subconsciente.",releaseDate:"2010-07-15",isWatching:!1},{id:19404,title:"Dilwale Dulhania Le Jayenge",poster:"https://image.tmdb.org/t/p/w500/2CAL2433ZeIihfX1Hb2139CX0pW.jpg",rating:4,overview:"Un joven se enamora durante un viaje a Europa.",releaseDate:"1995-10-20",isWatching:!0},{id:674,title:"Cadena Perpetua",poster:"https://image.tmdb.org/t/p/w500/q6y0Go1tsGEsmtFryDOJo3dEmqu.jpg",rating:5,overview:"Dos hombres encarcelados crean una amistad a lo largo de varios a\xf1os.",releaseDate:"1994-09-23",isWatching:!1},{id:238,title:"El Padrino",poster:"https://image.tmdb.org/t/p/w500/3bhkrj58Vtu7enYsRolD1fZdja1.jpg",rating:5,overview:"El patriarca de una dinast\xeda del crimen organizado transfiere el control a su hijo.",releaseDate:"1972-03-14",isWatching:!1}],h=[{id:"f1",name:"Sof\xeda",avatar:"",watchedMovies:[{...m[0],friendName:"Sof\xeda"},{...m[1],friendName:"Sof\xeda",rating:4},{...m[2],friendName:"Sof\xeda",rating:5}]},{id:"f2",name:"Diego",avatar:"",watchedMovies:[{...m[3],friendName:"Diego",rating:5,isWatching:!1},{...m[6],friendName:"Diego",rating:5,isWatching:!1},{...m[7],friendName:"Diego",rating:4,isWatching:!1}]},{id:"f3",name:"Valentina",avatar:"",watchedMovies:[{...m[5],friendName:"Valentina",rating:4},{...m[4],friendName:"Valentina",rating:5,isWatching:!1}]}];function Home(){let{friendsWithMovies:e,loading:a,error:i}=function(){let[e,a]=(0,t.useState)([]),[i,s]=(0,t.useState)(!0),[r,n]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async function(){try{s(!0),console.log("Loading friends movies...");let e=[],i=!0;for(let a of c){let s=[];for(let e of a.movieIds.slice(0,3))try{console.log("Loading movie ".concat(e," for ").concat(a.name));let i=await d.getMovieDetails(e);i&&s.push({...i,rating:function(e,a){let i=parseInt(e.toString()+a.slice(-1)),s=[4,5,4,5,3,4];return s[i%s.length]}(e,a.id),isWatching:a.currentlyWatching===e,friendName:a.name})}catch(a){console.log("Error loading movie ".concat(e,":"),a),i=!1;break}if(i&&s.length>0)e.push({...a,watchedMovies:s});else{console.log("API failed, using fallback data"),i=!1;break}}i&&e.length>0?(console.log("Successfully loaded from API:",e),a(e)):(console.log("Using fallback friends data"),a(h))}catch(e){console.error("Error loading friends movies, using fallback:",e),a(h),n("Usando datos de demostraci\xf3n")}finally{s(!1)}})()},[]),{friendsWithMovies:e,loading:i,error:r}}(),{movies:r,loading:n}=function(){let[e,a]=(0,t.useState)([]),[i,s]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{(async function(){try{console.log("Loading popular movies...");let e=await d.getPopularMovies();e&&e.length>0?(console.log("Successfully loaded popular movies:",e.length),a(e.slice(0,10))):(console.log("No popular movies from API, using fallback"),a(m.slice(0,6)))}catch(e){console.error("Error loading popular movies, using fallback:",e),a(m.slice(0,6))}finally{s(!1)}})()},[]),{movies:e,loading:i}}(),o=[];e.forEach(e=>{e.watchedMovies.forEach(a=>{a.rating>=4&&o.push({...a,friendName:e.name})})});let l=[];return(e.forEach(e=>{e.watchedMovies.forEach(a=>{a.isWatching&&l.push({...a,friendName:e.name})})}),i)?(0,s.jsxs)("div",{children:[(0,s.jsx)(Header,{}),(0,s.jsx)("main",{className:"container",children:(0,s.jsxs)("div",{className:"error-message",children:[(0,s.jsx)("h2",{children:"Error cargando pel\xedculas"}),(0,s.jsx)("p",{children:i}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"btn",children:"Reintentar"})]})})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)(Header,{}),(0,s.jsxs)("main",{className:"container",children:[(0,s.jsxs)("section",{className:"hero",children:[(0,s.jsx)("h1",{children:"Inicio"}),(0,s.jsx)("p",{children:"Bienvenido — mira lo que tus amigos recomiendan."})]}),(0,s.jsxs)("div",{className:"layout",children:[(0,s.jsxs)("div",{className:"main-col",children:[(0,s.jsxs)("section",{className:"section",children:[(0,s.jsx)("h2",{children:"Recomendaciones de Amigos"}),a?(0,s.jsx)("div",{className:"loading",children:(0,s.jsx)("p",{children:"Cargando recomendaciones..."})}):(0,s.jsx)("div",{className:"movies-grid",children:o.length?o.map(e=>(0,s.jsx)(MovieCard,{movie:e,showFriend:!0},e.id+"-"+e.friendName)):(0,s.jsx)("p",{className:"muted",children:"No hay recomendaciones disponibles."})})]}),(0,s.jsxs)("section",{className:"section",children:[(0,s.jsx)("h2",{children:"Lo que est\xe1n viendo ahora"}),a?(0,s.jsx)("div",{className:"loading",children:(0,s.jsx)("p",{children:"Cargando actividad de amigos..."})}):(0,s.jsx)("div",{className:"movies-grid",children:l.length?l.map(e=>(0,s.jsx)(MovieCard,{movie:e,showFriend:!0},e.id+"-watching-"+e.friendName)):(0,s.jsx)("p",{className:"muted",children:"Nadie est\xe1 viendo algo ahora."})})]}),(0,s.jsxs)("section",{className:"section",children:[(0,s.jsx)("h2",{children:"Pel\xedculas Populares"}),n?(0,s.jsx)("div",{className:"loading",children:(0,s.jsx)("p",{children:"Cargando pel\xedculas populares..."})}):(0,s.jsx)("div",{className:"movies-grid",children:r.map(e=>(0,s.jsx)(MovieCard,{movie:e},e.id))})]})]}),(0,s.jsx)("aside",{className:"side-col",children:(0,s.jsx)(FriendsPanel,{friends:e,loading:a})})]})]})]})}}},function(e){e.O(0,[66,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);